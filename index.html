<!DOCTYPE html>
<html>
	<head>
		<title>DuLeone Craps</title>
		<script src="jquery.min.js" lang='javascript' type='text/javascript'></script>
		<script type='text/javascript' language='javascript' src='craps.js'></script>
		<script type='text/javascript' language='javascript' src='bets.js'></script>
		<script type='text/javascript' language='javascript'>

			var p = new Player("Dan", 1000);
			_CRAPS.players = [p];

			_CRAPS.placeBet(new HardWaysBet(1000, p.id));
			_CRAPS.placeBet(new HardWaysBet(1500, p.id));

			function roll(){
				_CRAPS.output("---Rolling---");
				_CRAPS.roll();
			}
		</script>
		<style type='text/css'>
			button#roll{
				height: 20px;
				width: 300px;
				margin: 0px;
				padding: 0px;
				float: left;
				position: absolute;
				top: 0px;
				left: 0px;
			}
			#buffer{
				position: absolute;
				top: 20px;
				left: 0px;
				font-family: monospace;
				height: 748px;
				width: 300px;
				border: 1px solid black;
				overflow: auto;
				margin: 0px;
				padding: 0px;
			}
			#buffer span{
				padding-left: 5px;
			}
			#board{
				position: absolute;
				top: 0px;
				left: 300px;
				margin: 0px;
				padding: 0px;
			}
		</style>
	</head>
	<body>
		<!-- canvas id="board" height='1024' width='768'></canvas -->
		<canvas id="board" height='768' width='1024'></canvas>
		<button id='roll' onclick='roll()'>Roll</button><br />
		<div id='buffer'></div>

		<script type='text/javascript' language='javascript'>
			var canvas = document.getElementById("board");
			var board = canvas.getContext("2d");

			//var _h = 1024, _w = 768;
			var _h = 768, _w = 1024;
			var _l = 0, _r = _w;
			var _t = 0, _b = _h;

			var colors = {
				black: "#000",
				board: "#090"
			};

			var DrawCanvas = function(board){
				return {
					tmpContext: {},
					preserveContext: function(){
						for(var i in board){
							this.tmpContext[i] = board[i];
						}
					},
					restoreContext: function(){
						for(var i in this.tmpContext){
							board[i] = this.tmpContext[i];
						}
					},
					buildPoints: function(n, i){
						var _u = i/n;
						var _d = (n-i)/n;
						var _T = _b * _u;
						var _L = _r * _u;
						var _R = _r * _d;
						var _B = _b * _d;
						var p = {
							u: _u,
							d: _d,
							t: _t,
							l: _l,
							r: _r,
							b: _b,
							T: _T,
							L: _L,
							R: _R,
							B: _B
						};
						//console.log(p);
						return p;
					},
					line: function(x, y, w, h){
						board.moveTo(x, y);
						board.lineTo(w, h);
						board.stroke();
					},
					fillRect: function(x, y, w, h, color){
						board.fillStyle = color;
						board.fillRect(x, y, w, h);
					},
					strokeRect: function(x, y, w, h, etc){
						// Assumes etc.t is type int.

						etc = $.extend({
							color: '#000',
							t: 1 // thickness
						}, etc);

						this.preserveContext();
						board.lineWidth = etc.t;
						board.strokeStyle = etc.color;
						board.strokeRect(x, y, w, h);
						this.restoreContext();
/*
						var tmp = {};
						tmp.lineWidth = board.lineWidth;
						tmp.strokeStyle = board.strokeStyle;

						console.log(tmp);
						console.log(board);

						console.log("before board.lw: " + board.lineWidth);
						console.log("before tmp.lw: " + tmp.lineWidth);

						board.lineWidth = etc.t;
						board.strokeStyle = etc.color;

						console.log("during tmp.lw: " + tmp.lineWidth);
						console.log("during board.lw: " + board.lineWidth);
						console.log("during tmp.lw: " + tmp.lineWidth);
						board.strokeRect(x, y, w, h);

						board.lineWidth = tmp.lineWidth;
						board.strokeStyle = tmp.strokeStyle;

						console.log("after board.lw: " + board.lineWidth);
						console.log("after tmp.lw: " + tmp.lineWidth);
						/*
						for(var i = 0; i < etc.t; i++){
							board.strokeRect(x+i, y+i, w-(2*i), h-(2*i));
						}
						*/
					},
					fullGrid: function(n){
						for(var j = 0; j <= n; j++){
							var p = this.buildPoints(n,j);
							this.grid(n, j, p);
						}
					},
					grid: function(n, i, p){
						this.line(p.L, p.t, p.L, p.b);
						this.line(p.l, p.T, p.r, p.T);
					},
					fullStar: function(n){
						for(var j = 0; j <= n; j++){
							var p = this.buildPoints(n,j);
							this.star(n, j, p);
						}
					},
					star: function(n, i, p){
						this.line(p.L, p.t, p.R, p.b);
						this.line(p.l, p.T, p.r, p.B);
					},
					fullDiagGrid: function(n){
						for(var j = 0; j <= n; j++){
							var p = this.buildPoints(n,j);
							this.diagGrid(n, j, p);
						}
					},
					diagGrid: function(n, i, p){
						this.line(p.l, p.T, p.L, p.t); // Congruent: this.line(_l, _B, _R, _t);
						this.line(p.L, p.b, p.r, p.T); // Congruent: this.line(_R, _b, _r, _B); this.line(_r, _T, _L, _b);
						this.line(p.L, p.t, p.r, p.B); // Congruent: this.line(_R, _t, _r, _T);
						this.line(p.R, p.b, p.l, p.T); // Congruent: this.line(_L, _b, _l, _B);
					},
					fullConcaveArcs: function(n){
						for(var j = 0; j <= n; j++){
							var p = this.buildPoints(n,j);
							this.concaveArcs(n, j, p);
						}
					},
					concaveArcs: function(n, i, p){
						this.line(p.l, p.T, p.R, p.t); // Top Left | Congruent: this.line(_l, _B, _L, _t); this.line(_L, _t, _l, _B);
						this.line(p.R, p.t, p.r, p.B); // Top Right | Congruent: this.line(_L, _t, _r, _T);
						this.line(p.L, p.b, p.l, p.T); // Bottom Left | Congruent: this.line(_R, _b, _l, _B);
						this.line(p.r, p.B, p.L, p.b); // Bottom Right | Congruent: this.line(_r, _T, _R, _b); this.line(_R, _b, _r, _T); this.line(_L, _b, _r, _B);
					},
					fullPyramid: function(n){
						for(var j = 0; j <= n; j++){
							var p = this.buildPoints(n,j);
							this.pyramid(n, j, p);
						}
					},
					pyramid: function(n, i, p){
						this.line(p.r, p.t, p.L, p.T);
						this.line(p.l, p.t, p.R, p.T);
						this.line(p.r, p.b, p.L, p.B);
						this.line(p.l, p.b, p.R, p.B);
					},
					fullFromCorners: function(n){
						for(var j = 0; j <= n; j++){
							var p = this.buildPoints(n,j);
							this.fromCorners(n, j, p);
						}
					},
					fromCorners: function(n, i, p){
						this.line(p.l, p.t, p.r, p.T); // Top Left Top
						this.line(p.l, p.t, p.L, p.b); // Top Left Bottom
						this.line(p.r, p.t, p.l, p.T); // Top Right Top
						this.line(p.r, p.t, p.L, p.b); // Top Right Bottom
						this.line(p.l, p.b, p.L, p.t); // Bottm Left Top
						this.line(p.l, p.b, p.r, p.T); // Bottom Left Bottom
						this.line(p.r, p.b, p.L, p.t); // Bottom Right Top
						this.line(p.r, p.b, p.l, p.T); // Bottom Right Bottom
					},
					demo: function(n){
						for(var i = 0; i <= n; i++){
							var p = this.buildPoints(n, i);
							this.grid(n, i, p);
							this.star(n, i, p);
							this.diagGrid(n, i, p);
							this.concaveArcs(n, i, p);
							// FIGURE THIS OUT? this.convexArcs
							this.pyramid(n, i, p);
							//this.fromCorners(n, i, p);
						}
						//this.fullGrid(n);
						//this.fullStar(n);
						//this.fullDiagGrid(n);
						//this.fullConcaveArcs(n);
						// FIGURE THIS OUT? this.fullConvexArcs(n);
						//this.fullPyramid(n);
						//this.fullFromCorners(n);
					},
					resetBoard: function(){
						board.clearRect(_l, _t, _w, _h);
						d.fillRect(_l, _t, _w, _h, colors.board);
						d.strokeRect(_l, _t, _w, _h, {color: colors.black, t: 25});
					}
				}
			}

			var d = new DrawCanvas(board);
			d.resetBoard();
			//d.demo(24);
/*
			function gogogo(){
				window.timer = setInterval(drawit, 100);
				console.log(window.timer);
			}


			var drawit = function(q){
				if(typeof q != 'undefined'){
					this.i = 0;
					return;
				}

				if(typeof this.i == 'undefined'){
					this.i = 0;
				}

				this.i++;
				console.log(this.i);
				this.n = 36;
				var p = d.buildPoints(this.n, this.i);
				d.grid(this.n, this.i, p);
				d.star(this.n, this.i, p);
				//d.diagGrid(this.n, this.i, p);
				d.pyramid(this.n, this.i, p);
				d.concaveArcs(n, i, p);
				if(this.i>=this.n){
					clearInterval(window.timer);
					setTimeout(d.resetBoard, 1000);
					//gogogo('reset');
					//setTimeout(gogogo, 500);
				}
			}
	*/
			//setInterval(gogogo, 5000);

/*
			d.line(_r* 1/12, _t, _r* 1/12, _b);
			d.line(_r* 2/12, _t, _r* 2/12, _b);
			d.line(_r* 3/12, _t, _r* 3/12, _b);
			d.line(_r* 4/12, _t, _r* 4/12, _b);
			d.line(_r* 5/12, _t, _r* 5/12, _b);
			d.line(_r* 6/12, _t, _r* 6/12, _b);
			d.line(_r* 7/12, _t, _r* 7/12, _b);
			d.line(_r* 8/12, _t, _r* 8/12, _b);
			d.line(_r* 9/12, _t, _r* 9/12, _b);
			d.line(_r*10/12, _t, _r*10/12, _b);
			d.line(_r*11/12, _t, _r*11/12, _b);

			d.line(_l, _b* 1/12, _r, _b* 1/12);
			d.line(_l, _b* 2/12, _r, _b* 2/12);
			d.line(_l, _b* 3/12, _r, _b* 3/12);
			d.line(_l, _b* 4/12, _r, _b* 4/12);
			d.line(_l, _b* 5/12, _r, _b* 5/12);			
			d.line(_l, _b* 6/12, _r, _b* 6/12);
			d.line(_l, _b* 7/12, _r, _b* 7/12);
			d.line(_l, _b* 8/12, _r, _b* 8/12);
			d.line(_l, _b* 9/12, _r, _b* 9/12);
			d.line(_l, _b*10/12, _r, _b*10/12);
			d.line(_l, _b*11/12, _r, _b*11/12);

			d.line(_r* 0/12, _t, _r*12/12, _b);
			d.line(_r* 1/12, _t, _r*11/12, _b);
			d.line(_r* 2/12, _t, _r*10/12, _b);
			d.line(_r* 3/12, _t, _r* 9/12, _b);
			d.line(_r* 4/12, _t, _r* 8/12, _b);
			d.line(_r* 5/12, _t, _r* 7/12, _b);
			d.line(_r* 6/12, _t, _r* 6/12, _b);
			d.line(_r* 7/12, _t, _r* 5/12, _b);
			d.line(_r* 8/12, _t, _r* 4/12, _b);
			d.line(_r* 9/12, _t, _r* 3/12, _b);
			d.line(_r*10/12, _t, _r* 2/12, _b);
			d.line(_r*11/12, _t, _r* 1/12, _b);
			d.line(_r*12/12, _t, _r* 0/12, _b);

			d.line(_l, _b* 0/12, _r, _b*12/12);
			d.line(_l, _b* 1/12, _r, _b*11/12);
			d.line(_l, _b* 2/12, _r, _b*10/12);
			d.line(_l, _b* 3/12, _r, _b* 9/12);
			d.line(_l, _b* 4/12, _r, _b* 8/12);
			d.line(_l, _b* 5/12, _r, _b* 7/12);			
			d.line(_l, _b* 6/12, _r, _b* 6/12);
			d.line(_l, _b* 7/12, _r, _b* 5/12);
			d.line(_l, _b* 8/12, _r, _b* 4/12);
			d.line(_l, _b* 9/12, _r, _b* 3/12);
			d.line(_l, _b*10/12, _r, _b* 2/12);
			d.line(_l, _b*11/12, _r, _b* 1/12);
			d.line(_l, _b*12/12, _r, _b* 0/12);
*/			
/*
			d.line(_l, _t, _r, _b);
			d.line(_l, _b, _r, _t);
			d.line(_r*1/2, _t, _r*1/2, _b);
			d.line(_l, _b*1/2, _r, _b*1/2);
			d.line(_l, _b*1/4, _r, _b*3/4);
			d.line(_l, _b*3/4, _r, _b*1/4);
			d.line(_r*1/4, _t, _r*3/4, _b);
			d.line(_r*3/4, _t, _r*1/4, _b);

			d.line(_r*1/6, _t, _r*5/6, _b);
			d.line(_r*2/6, _t, _r*4/6, _b);
			d.line(_r*4/6, _t, _r*2/6, _b);
			d.line(_r*5/6, _t, _r*1/6, _b);

			d.line(_l, _b*1/6, _r, _b*5/6);
			d.line(_l, _b*2/6, _r, _b*4/6);
			d.line(_l, _b*4/6, _r, _b*2/6);
			d.line(_l, _b*5/6, _r, _b*1/6);
*/
		</script>
	</body>
</html>