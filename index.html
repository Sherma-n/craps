<!DOCTYPE html>
<html>
  <head>
    <title>DuLeone Craps</title>
    <meta name="description" content="HTML5 Craps">
    <meta name="keywords" content="Craps,Free Craps,HTML5 Craps">
    <meta name="author" content="Matt DuLeone">
    <link href="layout.css" media="all" rel="stylesheet" type="text/css" />
    <link href="css3-gmail-style.css" media="all" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/x-icon" href="images/dice_small.ico" />
  </head>
  <body>
    <!-- canvas id="board" height='1024' width='768'></canvas -->
    <canvas id="board"></canvas>
    
    <div id='betForm' class='round'>
      <fieldset id='betInfo' class='round'>
        <legend>Create a Bet!</legend>
        <p>
          <label for='betType'>Bet Type</label>
          <select id='betType' name='betType'></select><br />
          <p id='betName'></p>
          <p id='betDesc'></p>
          <label id='betValLabel' for='betValue'>Bet Value</label>
          <input id='betValue' name='betValue' type='text' onchange='updateSlider(this.value)' /><br />
          <input id='betValSlide' name='betValue' type='range' min='0' max='10000' step='10' value='10' onchange='betValSlide(this.value)' /><br />
          <label for='repeat'>Repeat Bet on Win?</label>
          <input id='betRepeat' name='betRepeat' type='checkbox' />
        </p>
        <p id='origBet'></p>
        <p>
          <div id='create' unselectable='on' class='bttn blue' onclick='create()'>Create Bet!</div>
          <div id='cancel' unselectable='on' class='bttn red' onclick='cancel()'>Close</div>
        </p>
      </fieldset>
    </div>
    <div id='betListing'></div>
    <div id='playerArea'>
      <div id='name' class='name clickable' onclick='updatePlayerName()' align='center'></div>
      <div id='bank'></div>
      <!--div id='roll' unselectable='on' class='bttn red' onclick='roll()'>Roll</div -->
      <!--div id='reset' unselectable='on' class='bttn red' onclick='reset()'>Reset Bets</div -->
    </div>
    <div id='buffer'></div>
    <div id='generalButtons'>
      <div id='openButtons'>
        <div id='openHelp' class='bttn blue' onclick='clickModalButton("help")'>Game Play</div>
        <div id='openRules' class='bttn blue' onclick='clickModalButton("rules")'>Bets</div>
        <div id='openSettings' class='bttn blue' onclick='clickModalButton("settings")'>Settings</div>
        <div id='openTutorial' class='bttn blue' onclick='clickModalButton("tutorial")'>Tutorial</div>
      </div>
      <div id='closeTutorial' class='bttn red' onclick='closeTutorial()'>Close Tutorial</div>
    </div>
    <div id='tutorialInstruction'></div>
    <div id='modalScreen' onclick="closeModal()"></div>
    <div id='modal' class='smallRound'>
      <div id='modalButtons'>
        <div id='helpButton' class='bttn blue' onclick='clickModalButton("help")'>Game Play</div>
        <div id='rulesButton' class='bttn' onclick='clickModalButton("rules")'>Bets</div>
        <div id='settingsButton' class='bttn' onclick='clickModalButton("settings")'>Settings</div>
        <div id='tutorialButton' class='bttn' onclick='clickModalButton("tutorial")'>Tutorial</div>
      </div>
      <div id='modalWindow'>
        <div id='tutorial'>
          <p id='tutorialDescription'></p>
          <div id='startTutorial' class='bttn yellow' onclick='startTutorial()'>Start Tutorial</div>
          <div id='closeTutorial2' class='bttn red' onclick='closeTutorial()'>Close Tutorial</div>
        </div>
        <div id='settings'>
          <label for='startingBank'>Starting Bank: </label>
          <input id='startingBank' type='text' size="10"><br />
          Timing Settings (For off/no delay, try "0"):<br />
          <label for='modalTiming'>Help Fade Out Time (milliseconds): </label>
          <input id='modalTiming' type='text' size="10"><br />
          <label for='betFormTiming'>Bet Form Slide Time (milliseconds): </label>
          <input id='betFormTiming' type='text' size="10"><br />
          <label for='diceTiming'>Dice Roll Time (milliseconds): </label>
          <input id='diceTiming' type='text' size="10"><br />
          <label for='colorScheme'>Color Scheme: </label>
          <select id='colorScheme' onchange='updateColors()'>
            <option value = "0">Standard Board</option>
            <option value = "1">Red Board</option>
            <option value = "2">Blue Board</option>
            <option value = "3">Purple Board</option>
            <option value = "4">Charcoal Board</option>
            <option value = "5">Customize Your Own Scheme!</option>
          </select><br />
          <div id='customColors'>
            <label for='boardColor'>Board: #</label><input id='boardColor' class='color'><br />
            <label for='border'>Board Border: #</label><input id='border' class='color'><br />
            <label for='lines'>Lines: #</label><input id='lines' class='color'><br />
            <label for='specialText'>Special 1: #</label><input id='specialText' class='color'><br />
            <label for='finalText'>Special 2: #</label><input id='finalText' class='color'><br />
            <label for='dice'>Dice: #</label><input id='dice' class='color'><br />
            <label for='dicePips'>Dice Pips: #</label><input id='dicePips' class='color'><br />
            <label for='text'>Text: #</label><input id='text' class='color'><br />
            <label for='pointBorder'>Point Border: #</label><input id='pointBorder' class='color'><br />
            <label for='pointOff'>Point Off: #</label><input id='pointOff' class='color'><br />
            <label for='pointOn'>Point On: #</label><input id='pointOn' class='color'><br />
            <label for='buttonText'>Point Text: #</label><input id='buttonText' class='color'><br />
            <label for='betFill'>Bet Fill: #</label><input id='betFill' class='color'><br />
            <label for='betBorder'>Bet Border: #</label><input id='betBorder' class='color'><br />
            <div id='apply' class='bttn yellow' onclick='saveSettings()'>Apply</div>
            <div id='resetColors' class='bttn yellow' onclick='resetColors()'>Reset Custom Colors</div>
          </div>
        </div>
        <div id='rules'>
          <div id='rulesButtons'>
            <div id='standardButton' class='bttn red' onclick='clickRulesButton("standard")'>Standard Bets</div>
            <div id='multiButton' class='bttn' onclick='clickRulesButton("multi")'>Multi-Roll Bets</div>
            <div id='singleButton' class='bttn' onclick='clickRulesButton("single")'>Single-Roll Bets</div>
            <div id='fireButton' class='bttn' onclick='clickRulesButton("fire")'>Fire Bets</div>
          </div>
          <div id='standard'>
            <ul>
              <li>
                Passline<br />
                You may only place when the point is Off. If you have a Passline Bet on and a point gets set, you may not remove it.<br />
                When the point is off:
                <ul>
                  <li>7 &amp; 11 win 1 to 1</li>
                  <li>2 &amp; 3 lose</li>
                  <li>12 pushes</li>
                  <li>Anything else sets a point</li>
                </ul>
                When the point is on:
                <ul>
                  <li>The point wins 1 to 1</li>
                  <li>7 loses</li>
                  <li>Anything else, roll again</li>
                </ul>
              </li>
              <li>
                Don't Pass<br />
                You may only place when the point is Off. If you have a Don't Pass Bet on and a point gets set, you may not remove it.<br />
                When the point is off:
                <ul>
                  <li>7 &amp; 11 lose</li>
                  <li>2 &amp; 3 win 1 to 1</li>
                  <li>12 pushes</li>
                  <li>Anything else sets a point</li>
                </ul>
                When the point is on:
                <ul>
                  <li>The point loses</li>
                  <li>7 wins 1 to 1</li>
                  <li>Anything else, roll again</li>
                </ul>
              </li>
              <li>
                Come<br />
                A Passline bet, but on its own point cycle. You may place it whenever.
              </li>
              <li>
                Don't Come<br />
                A Don't Pass bet, but on its own point cycle. You may place it whenever.
              </li>
              <li>
                Odds<br />
                You may only place when you have a bet of the matching type on the table (Pass Line/Don't Pass Line/Come/Don't Come), and the bet has a point on.<br />
                Same winning conditions as the associated bet.<br />
                Payout:<br />Point 4, 10: 1 pays 2<br />Point 5, 9: 2 pays 3 <br />Point 6, 8: 5 pays 6
              </li>
            </ul>
          </div>
          <div id='multi'>
            You may place these whenever. Usually off when the point is off.
            <ul>
              <li>
                Place Bets<br />
                <ul>
                  <li>The place number wins</li>
                  <li>7 loses</li>
                  <li>Anything else pushes</li>
                </ul>
              </li>
              <li>
                Hardways Bets<br />
                <ul>
                  <li>Hardways wins</li>
                  <li>Easy loses</li>
                  <li>7 loses</li>
                  <li>Anything else pushes</li>
                </ul>
              </li>
              <li>
                Big 6/8<br />
                <ul>
                  <li>6 or 8 wins</li>
                  <li>7 loses</li>
                  <li>Anything else pushes</li>
                </ul>
              </li>
            </ul>
          </div>
          <div id='single'>
            You may place these whenever. Usually off when the point is off.<br /><br />
            See the individual bet for the win conditions.
          </div>
          <div id='fire'>
            A Fire Bet may only be placed during the initial Come out roll, when there is no point established, and no fire markers on the table.<br /><br />
            A Fire bet pays out only when four or more unique points are made before Seven Outting.
          </div>
        </div>
        <div id='help'>
          <u>Game Play:</u>
          <ul>
            <li>To read about the different bets, check out the "Bets" tab.</li>
            <li>To set your name, click on/touch the name area.</li>
            <li>To roll, click on/touch the dice on the table or hit the "R" or "SPACE" key.</li>
            <li>To place a bet, click on/touch the area of the board you want to place a bet.
              <ul>
                <li>Once you are satisfied with the bet, click "Create Bet!" or hit the "Enter" key.</li>
                <li>If you decide you don't want to create the bet, click "Cancel" or hit the "Esc" key.</li>
                <li>To place a Passline/Don't Pass odds bet, click on/touch the Passline/Don't Pass<br />area when there is a point on.</li>
                <li>To place a Come/Don't Come odds bet, click on/touch the Come/Don't Come<br />standard areas, then select Come/Don't Come Odds from the drop down and<br />make sure the correct Original Bet Id is in the box.</li>
              </ul>
            </li>
            <li>To change a bet's amount, click on the amount.</li>
            <li>To reset your game and bankroll, click "Reset Game"</li>
            <li>Your session will automatically save after every roll. If you want to take the game to another device, click "Save Game", and copy the URL in the pop up. Open that URL on your other device, and your game will pick up where this one left off!
              <ul>
                <li>Important! When transfering to another device, all bets on the table and Fire Bet progress will be lost!</li>
              </ul>
            </li>
          </ul>
          <u>Key:</u>
          <table>
            <tr>
              <th>Heading</th>
              <th>Meaning</td>
            </tr>
            <tr>
              <td class='imageKey'><img src='images/id-card_green_small.png'></td>
              <td class='keyText'>Bet Id</td>
            </tr>
            <tr>
              <td class='imageKey'><img src='images/shapes_small.png'></td>
              <td class='keyText'>Bet Type</td>
            </tr>
            <tr>
              <td class='imageKey'><img src='images/chips_small.png'></td>
              <td class='keyText'>Bet Amount</td>
            </tr>
            <tr>
              <td class='imageKey'><img src='images/power_button_black_small.png'></td>
              <td class='keyText'>Bet On?</td>
            </tr>
            <tr>
              <td class='imageKey'><img src='images/restart_small.png'></td>
              <td class='keyText'>Repeat Bet on Win?</td>
            </tr>
            <tr>
              <td class='imageKey'><img src='images/point_small.png'></td>
              <td class='keyText'>Bet Point</td>
            </tr>
            <tr>
              <td class='imageKey red'><img src='images/edit-clear_small.png'></td>
              <td class='keyText'>Clear All Bets</td>
            </tr>
          </table>
        </div>
      </div>
      <div id='closeModal' class='bttn red' onclick='closeModal()'>Close</div>
    </div>
    <div id='glossary'>
      <span id='glossaryTerm' style='display:block'></span>
      <span id='glossaryDefinition' style='display:block'></span>
    </div>
    <div id='glossaryScreen' onclick="closeGlossary()"></div>
  </body>
  <footer>

    <script src="jquery.min.js" lang='javascript' type='text/javascript'></script>
    <script src="jquery.color.js" lang='javascript' type='text/javascript'></script>
    <script src='jscolor.js' lang='javascript' type='text/javascript'></script>
    <script type='text/javascript' language='javascript' src='utils.js'></script>
    <script type='text/javascript' language='javascript' src='html5slider.js'></script>
    <script type='text/javascript' language='javascript' src='dice.js'></script>
    <script type='text/javascript' language='javascript' src='crapsDice.js'></script>
    <script type='text/javascript' language='javascript' src='bets.js'></script>
    <script type='text/javascript' language='javascript' src='crapsBets.js'></script>
    <script type='text/javascript' language='javascript' src='players.js'></script>
    <script type='text/javascript' language='javascript' src='crapsPlayers.js'></script>
    <script type='text/javascript' language='javascript' src='craps.js'></script>
    <script type='text/javascript' language='javascript' src='board.js'></script>

    <script type='text/javascript' language='javascript'>
      
      function draw(Board) {
          //console.log('drawing');
          var canvas = document.getElementById("board");
      
          var board;
          if(colors){
            var pips = colors['dicePips'];
          }
          colors = $.extend({}, eval("colors" + $('#colorScheme').val()));
          if(pips){
            colors['dicePips'] = pips;
          }
          
          board = new Board(canvas, colors);
          board.draw();
      
          canvas.onclick = function(e) {
              //console.log('(x = ' + ((e.clientX - board.canvas.offsetLeft)/ board.canvas.clientWidth) * 2000 + ',','y = ' +  ((e.clientY - board.canvas.offsetTop)/ board.canvas.clientHeight) * 1000 + ')');
              //console.log(board.processClick(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop));
              //ctx = board.context;
              //ctx.beginPath();
              //ctx.lineWidth = 5;
              //ctx.arc(((e.clientX - board.canvas.offsetLeft)/ board.canvas.clientWidth) * 2000,
              //        ((e.clientY - board.canvas.offsetTop)/ board.canvas.clientHeight) * 1000, 15, 2 * Math.PI, false);
              //ctx.fill();
              //ctx.closePath();
              //ctx.stroke();
              boardArea = board.processClick(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);
              if(boardArea){
                if(boardArea.name == "Dice"){
                  if(GameState.tutorial){
                    if((GameState.tutorialState == 0 && _CRAPS.dealer.betManager.bets.length == 0) ||
                       (GameState.tutorialState == 3 && _CRAPS.dealer.betManager.bets.length == 1) ||
                        GameState.tutorialState == 7){
                      return;
                    }
                  }
                  roll();
                  return;
                }
                //if(boardArea.name == "Help"){
                //  openModal();
                //  return;
                //}
                if(boardArea.name == "Reset"){
                  if(GameState.tutorial){
                    return;
                  }
                  if(_CRAPS.dealer.betManager.bets.length > 0){
                    alert("You cannot reset your game when you have bets on the table.");
                  } else {
                    nextBetId = 1;
                    GameState.point = null;
                    for(i in GameState.fireArray){
                      GameState.fireArray[i] = false;
                    }
                    PlayerManager.players[0].player.bank = initBank;
                    PlayerManager.updatePlayerArea();
                    $('#buffer').empty();
                  }
                  return;
                }
                if(boardArea.name == "Save Game"){
                  if(GameState.tutorial){
                    return;
                  }
                  saveGameState();
                  return;
                }
                clickAreaPlaceBet(boardArea);
              }
          };
      }
      var savePoint;
      var saveBets;
      var saveFireArray;
      var saveDice;
      var drawer = setInterval(function(){
         //                   if(((!isNaN(savePoint) && !isNaN(GameState.point)) &&
         //                      savePoint != GameState.point) ||
         //                      saveBets != _CRAPS.dealer.betManager.bets.length ||
         //                      saveFireArray != GameState.fireArray ||
         //                      saveDice[0] != _CRAPS.dice.getDiceAsArray()[0] ||
         //                      saveDice[1] != _CRAPS.dice.getDiceAsArray()[1]){
                              draw(Board);
         //                   }
         //                   savePoint = GameState.point;
         //                   saveBets = _CRAPS.dealer.betManager.bets.length;
         //                   saveFireArray = GameState.fireArray;
         //                   saveDice = _CRAPS.dice.getDiceAsArray();
                          }, 200);
      //draw(Board);
            
      function updateBetDesc(){
        switch($('#betType').val()){
        case "passline":
          $('#betDesc').html('Payout:<br /> 1 pays 1');
          break;
        case "passlineOdds":
          $('#betDesc').html('Payout:<br />Point 4, 10: 1 pays 2<br />Point 5, 9: 2 pays 3 <br />Point 6, 8: 5 pays 6');
          break;
        case "dontPass":
          $('#betDesc').html('Payout:<br /> 1 pays 1');
          break;
        case "dontPassOdds":
          $('#betDesc').html('Payout:<br />Point 4, 10: 2 pays 1<br />Point 5, 9: 3 pays 2 <br />Point 6, 8: 6 pays 5');
          break;
        case "come":
          $('#betDesc').html('Payout:<br /> 1 pays 1');
          break;
        case "comeOdds":
          $('#betDesc').html('Payout:<br />Point 4, 10: 1 pays 2<br />Point 5, 9: 2 pays 3 <br />Point 6, 8: 5 pays 6');
          break;
        case "dontCome":
          $('#betDesc').html('Payout:<br /> 1 pays 1');
          break;
        case "dontComeOdds":
          $('#betDesc').html('Payout:<br />Point 4, 10: 2 pays 1<br />Point 5, 9: 3 pays 2 <br />Point 6, 8: 6 pays 5');
          break;
        case "place4":
          $('#betDesc').html('Payout:<br /> 5 pays 9');
          break;
        case "place5":
          $('#betDesc').html('Payout:<br /> 5 pays 7');
          break;
        case "place6":
          $('#betDesc').html('Payout:<br /> 6 pays 7');
          break;
        case "place8":
          $('#betDesc').html('Payout:<br /> 6 pays 7');
          break;
        case "place9":
          $('#betDesc').html('Payout:<br /> 5 pays 7');
          break;
        case "place10":
          $('#betDesc').html('Payout:<br /> 5 pays 9');
          break;
        case "big6":
          $('#betDesc').html('Payout:<br /> 1 pays 1');
          break;
        case "big8":
          $('#betDesc').html('Payout:<br /> 1 pays 1');
          break;
        case "field":
          $('#betDesc').html('Payout:<br />Roll 3, 4, 9, 10, 11: 1 pays 1<br />Roll 2, 12: 1 pays 2');
          break;
        case "cAndE":
          $('#betDesc').html('Payout:<br />Craps: 1 pays 3<br />Yo-leven: 1 pays 7<br />No Minimum Bet');
          break;
        case "any7":
          $('#betDesc').html('Payout:<br />1 pays 4<br />No Minimum Bet<br />Increments of 3');
          break;
        case "hard4":
          $('#betDesc').html('Payout:<br /> 1 pays 7');
          break;
        case "hard6":
          $('#betDesc').html('Payout:<br /> 1 pays 9');
          break;
        case "hard8":
          $('#betDesc').html('Payout:<br /> 1 pays 9');
          break;
        case "hard10":
          $('#betDesc').html('Payout:<br /> 1 pays 7');
          break;
        case "aceTwo":
          $('#betDesc').html('Payout:<br /> 1 pays 15');
          break;
        case "snakeEyes":
          $('#betDesc').html('Payout:<br /> 1 pays 30');
          break;
        case "midnight":
          $('#betDesc').html('Payout:<br /> 1 pays 30');
          break;
        case "yoleven":
          $('#betDesc').html('Payout:<br /> 1 pays 15');
          break;
        case "anyCraps":
          $('#betDesc').html('Payout: 1 pays 7<br />No Minimum Bet<br />Increments of 4');
          break;
        case "horn":
          $('#betDesc').html('Payout:<br />Roll 2, 12: 4 pays 27<br />Roll 3, 11: 1 pays 3<br />No Minimum Bet<br />Increments of 4');
          break;
        case "world":
          $('#betDesc').html('Payout:<br />Roll 2, 12: 5 pays 26<br />Roll 3, 11: 5 pays 11<br />Roll 7: Push<br />No Minimum Bet<br />Increments of 5');
          break;
        case "fire":
          $('#betDesc').html('Payout:<br />4 points in a row: 1 pays 24<br />5 points in a row: 1 pays 249<br />6 points in a row: 1 pays 999<br />$10 maximum bet');
          break;
        default:
          return false;
        }
      };
      
      function clickAreaPlaceBet(area){
        addBet(area);
      }
      
      function betValSlide(value){
        $('#betValue').attr('value', value);
      }
      
      function updateSlider(val){
        $('#betValSlide').attr('value', val);
      }
      
      $('#betValue').bind('keyup', function(e) {updateSlider(($('#betValue').val()?$('#betValue').val():0))});
      
      $(window).bind('keyup',
        function(e) { var code = (e.keyCode ? e.keyCode : e.which);
          //console.log(code);
          if(code == 13) {
            if($('#betForm').css('visibility')!= 'hidden' && $('#betForm').css('display') != 'none'){
              create();
            }
          }
          if(code == 27) {
            if($('#betForm').css('visibility')!= 'hidden' && $('#betForm').css('display') != 'none'){
              cancel();
            }
            if($('#modal').css('visibility')!= 'hidden' && $('#modal').css('display') != 'none'){
              closeModal();
            }
          }
          if(code == 32 || code == 82){
            if(($('#modal').css('visibility') == 'hidden' || $('#modal').css('display') == 'none') && ($('#betForm').css('visibility') == 'hidden' || $('#betForm').css('display') == 'none')){
              var active = $(document.activeElement);
              if(active[0] === $('#nameInput')[0]){
                return;
              }
              roll();
            }
          }
        }
      );

      function addBet(area){
        $('#betRepeat').removeAttr('disabled');
        $('#betRepeat').attr('checked');
        $('#betType').show();
        $('#betName').show();
        $('#betValSlide').attr('min', '0');
        $('#betValSlide').attr('max', Math.min(_CRAPS.maxBet, PlayerManager.players[0].player.bank));
        $('#betValSlide').attr('step', '100');
        $('#betValSlide').attr('value', '100');
        
        if(GameState.tutorial){
          if(area.name == "Pass Line"){
            if((GameState.tutorialState == 0 && _CRAPS.dealer.betManager.bets.length == 0) ||
               (GameState.tutorialState == 3 && _CRAPS.dealer.betManager.bets.length == 1)){
              $('#betType').empty();
              var opt = $(document.createElement('option'));
              if(!GameState.point){
                opt.attr('value', 'passline');
                opt.html('Pass Line');
              } else {
                opt.attr('value', 'passlineOdds');
                opt.html('Pass Line Odds');
              }
              $('#betType').append(opt).attr('disabled', 'true');
              $('#betRepeat').attr('checked','');
              $('#origBet').empty();
              if($('#betType').val() == 'passlineOdds'){
                var origBet = $('#origBet');
                var origLabel = $(document.createElement('label'));
                var orig = $(document.createElement('input'));
                var bets = _CRAPS.dealer.betManager.bets;
                orig.attr('type', 'text');
                orig.css({width: '50px'});
                orig.attr('id', 'orig');
                var _type = $('#betType').val().slice(0, 8);
                for(i in bets){
                  if(bets[i].type == _type){
                    orig.attr('value', bets[i].bet.betId);
                  }
                }
                origBet.append(origLabel).append(orig);
                origBet.hide();
                $('#betRepeat').removeAttr('checked');
                var origVal;
                for(i in _CRAPS.dealer.betManager.bets){
                  if(_CRAPS.dealer.betManager.bets[i].type == 'passline'){
                    origVal = _CRAPS.dealer.betManager.bets[i].bet.value;
                  }
                }
                if(GameState.point == 4 || GameState.point == 10){
                  $('#betValSlide').attr('step', '50');
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                  $('#betValSlide').attr('max', origVal * 3);
                } else if(GameState.point == 5 || GameState.point == 9){
                  $('#betValSlide').attr('step', '50');
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                  $('#betValSlide').attr('max', origVal * 4);
                } else if(GameState.point == 6 || GameState.point == 8){
                  $('#betValSlide').attr('step', '50');
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                  $('#betValSlide').attr('max', origVal * 5);
                }
              }
              $('#betType').hide();
              $('#betName').html(nameToPretty($('#betType').val()));
              updateBetDesc();
              place();
            }
          }
              $('#betType').hide();
          return;
        }
        
        switch(area.name){
        case "Pass Line":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          if(!GameState.point){
            opt.attr('value', 'passline');
            opt.html('Pass Line');
          } else {
            opt.attr('value', 'passlineOdds');
            opt.html('Pass Line Odds');
          }
          $('#betType').append(opt).attr('disabled', 'true');
          $('#betRepeat').attr('checked','');
          $('#origBet').empty();
          if($('#betType').val() == 'passlineOdds'){
            var origBet = $('#origBet');
            var origLabel = $(document.createElement('label'));
            var orig = $(document.createElement('input'));
            var bets = _CRAPS.dealer.betManager.bets;
            orig.attr('type', 'text');
            orig.css({width: '50px'});
            orig.attr('id', 'orig');
            var _type = $('#betType').val().slice(0, 8);
            for(i in bets){
              if(bets[i].type == _type){
                orig.attr('value', bets[i].bet.betId);
              }
            }
            origBet.append(origLabel).append(orig);
            origBet.hide();
            $('#betRepeat').removeAttr('checked');
            var origVal;
            for(i in _CRAPS.dealer.betManager.bets){
              if(_CRAPS.dealer.betManager.bets[i].type == 'passline'){
                origVal = _CRAPS.dealer.betManager.bets[i].bet.value;
              }
            }
            if(GameState.point == 4 || GameState.point == 10){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
              $('#betValSlide').attr('max', origVal * 3);
            } else if(GameState.point == 5 || GameState.point == 9){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
              $('#betValSlide').attr('max', origVal * 4);
            } else if(GameState.point == 6 || GameState.point == 8){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
              $('#betValSlide').attr('max', origVal * 5);
            }
          }
          $('#betType').hide();
          $('#betName').html(nameToPretty($('#betType').val()));
          updateBetDesc();
          break;
        case "Don't Pass":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          if(!GameState.point){
            opt.attr('value', 'dontPass');
            opt.html('Don\'t Pass Line');
          } else {
            opt.attr('value', 'dontPassOdds');
            opt.html('Don\'t Pass Odds');
          }
          $('#betType').append(opt).attr('disabled', 'true');
          $('#betRepeat').attr('checked','');
          $('#origBet').empty();
          if($('#betType').val() == 'dontPassOdds'){
            var origBet = $('#origBet');
            var origLabel = $(document.createElement('label'));
            var orig = $(document.createElement('input'));
            var bets = _CRAPS.dealer.betManager.bets;
            orig.attr('type', 'text');
            orig.css({width: '50px'});
            orig.attr('id', 'orig');
            var _type = $('#betType').val().slice(0, 8);
            for(i in bets){
              if(bets[i].type == _type){
                orig.attr('value', bets[i].bet.betId);
              }
            }
            origBet.append(origLabel).append(orig);
            origBet.hide();
            $('#betRepeat').removeAttr('checked');
            var origVal;
            for(i in _CRAPS.dealer.betManager.bets){
              if(_CRAPS.dealer.betManager.bets[i].type == 'dontPass'){
                origVal = _CRAPS.dealer.betManager.bets[i].bet.value;
              }
            }
            if(GameState.point == 4 || GameState.point == 10){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
              $('#betValSlide').attr('max', origVal * 6);
            } else if(GameState.point == 5 || GameState.point == 9){
              $('#betValSlide').attr('step', '30');
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
              $('#betValSlide').attr('max', origVal * 8);
            } else if(GameState.point == 6 || GameState.point == 8){
              $('#betValSlide').attr('step', '60');
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
              $('#betValSlide').attr('max', origVal * 10);
            }
          }
          $('#betType').hide();
          $('#betName').html(nameToPretty($('#betType').val()));
          updateBetDesc();
          break;
        case "Come":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'come');
          opt.html('Come Line');
          var opt2 = $(document.createElement('option'));
          opt2.attr('value', 'comeOdds');
          opt2.html('Come Line Odds');
          $('#betRepeat').attr('checked','');
          $('#origBet').empty();
          if($('#betType').val() == 'comeOdds'){
            var origBet = $('#origBet');
            var origLabel = $(document.createElement('label'));
            var orig = $(document.createElement('input'));
            orig.attr('type', 'text');
            orig.css({width: '50px'});
            orig.attr('id', 'orig');
            origLabel.html('Original Bet ID: ');
            origBet.append(origLabel).append(orig);
            origBet.show()
            $('#betRepeat').removeAttr('checked');
            origVal = _CRAPS.dealer.betManager.getBetById(orig.val()).bet.value;
            if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 4 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 10){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('max', origVal * 3);
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
            } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 5 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 9){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('max', origVal * 4);
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
            } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 6 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 8){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('max', origVal * 5);
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
            }
          }
          $('#betType').append(opt).append(opt2).attr('disabled', false);
          $('#betName').hide();
          updateBetDesc();
          break;
        case "Don't Come":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'dontCome');
          opt.html('Don\'t Come Line');
          var opt2 = $(document.createElement('option'));
          opt2.attr('value', 'dontComeOdds');
          opt2.html('Don\'t Come Odds');
          $('#betRepeat').attr('checked'), '';
          $('#origBet').empty();
          if($('#betType').val() == 'dontComeOdds'){
            var origBet = $('#origBet');
            var origLabel = $(document.createElement('label'));
            var orig = $(document.createElement('input'));
            orig.attr('type', 'text');
            orig.css({width: '50px'});
            orig.attr('id', 'orig');
            origLabel.html('Original Bet ID: ');
            origBet.append(origLabel).append(orig);
            origBet.show()
            $('#betRepeat').removeAttr('checked');
            origVal = _CRAPS.dealer.betManager.getBetById(orig.val()).bet.value;
            if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 4 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 10){
              $('#betValSlide').attr('step', '50');
              $('#betValSlide').attr('max', origVal * 6);
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
            } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 5 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 9){
              $('#betValSlide').attr('step', '30');
              $('#betValSlide').attr('max', origVal * 8);
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
            } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 6 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 8){
              $('#betValSlide').attr('step', '60');
              $('#betValSlide').attr('max', origVal * 10);
              $('#betValSlide').attr('value', $('#betValue').attr('value'));
            }
          }
          $('#betType').append(opt).append(opt2).attr('disabled', false);
          $('#betName').hide();
          updateBetDesc();
          break;
        case "Place 4":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'place4');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Place 4');
          $('#betType').attr('disabled', 'true');
          $('#betRepeat').attr('checked', '');
          $('#origBet').empty();
          updateBetDesc();
          break;
        case "Place 5":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'place5');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Place 5');
          $('#betType').attr('disabled', 'true');
          $('#betRepeat').attr('checked', '');
          $('#origBet').empty();
          updateBetDesc();
          break;
        case "Place 6":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'place6');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Place 6');
          $('#betType').attr('disabled', 'true');
          $('#betRepeat').attr('checked', '');
          $('#betValSlide').attr('step', '60');
          $('#betValSlide').attr('value', '120');
          $('#origBet').empty();
          updateBetDesc();
          break;
        case "Place 8":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'place8');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Place 8');
          $('#betType').attr('disabled', 'true');
          $('#betValSlide').attr('step', '60');
          $('#betValSlide').attr('value', '120');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Place 9":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'place9');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Place 9');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Place 10":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'place10');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Place 10');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Big 6":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'big6');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Big 6');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Big 8":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'big8');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Big 8');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Field":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'field');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Field');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "C and E":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'cAndE');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('C and E');
          $('#betType').attr('disabled', 'true');
          $('#betValSlide').attr('step', '20');
          $('#betValSlide').attr('value', '200');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Seven":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'any7');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Any 7');
          $('#betType').attr('disabled', 'true');
          $('#betValSlide').attr('step', '30');
          $('#betValSlide').attr('value', '300');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Hard 4":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'hard4');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Hard 4');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Hard 6":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'hard6');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Hard 6');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Hard 8":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'hard8');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Hard 8');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Hard 10":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'hard10');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Hard 10');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').attr('checked', '');
          updateBetDesc();
          break;
        case "Ace Two":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'aceTwo');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Ace Two');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Snake Eyes":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'snakeEyes');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Snake Eyes');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Midnight":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'midnight');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Midnight');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Yo-leven":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'yoleven');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Yo-leven');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Craps":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'anyCraps');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Any Craps');
          $('#betType').attr('disabled', 'true');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Horn":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'horn');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Horn');
          $('#betType').attr('disabled', 'true');
          $('#betValSlide').attr('step', '40');
          $('#betValSlide').attr('value', '400');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "World":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'world');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('World');
          $('#betType').attr('disabled', 'true');
          $('#betValSlide').attr('step', '50');
          $('#betValSlide').attr('value', '500');
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        case "Fire":
          $('#betType').empty();
          var opt = $(document.createElement('option'));
          opt.attr('value', 'fire');
          opt.html(area.name);
          $('#betType').append(opt);
          $('#betType').hide();
          $('#betName').html('Fire');
          $('#betType').attr('disabled', 'true');
          $('#betValSlide').attr('step', '1');
          $('#betValSlide').attr('max', '10');
          if(parseInt($('#betValue').attr('value')) > 10){
            $('#betValue').attr('value', '5');
          }
          $('#betValSlide').attr('value', $('#betValue').attr('value'));
          $('#origBet').empty();
          $('#betRepeat').removeAttr('checked');
          updateBetDesc();
          break;
        default:
          return false;
        }
        
        place();
      }
      
      var name;
      var bank;
      var initBank;
      var MODAL_FADE_INTERVAL;
      var BET_FORM_FADE_OUT;
      var DICE_ROLL;
      if(localStorage["initBank"]){
        initBank = parseInt(localStorage["initBank"]);
      } else {
        initBank = 10000;
      }
      if(localStorage['point']){
        if(localStorage['point'] == "null"){
          GameState.point = null;
        } else {
          GameState.point = parseInt(localStorage['point']);
        }
      }
      if(localStorage['fireArray']){
        GameState.fireArray = JSON.parse(localStorage['fireArray']);
      }
      if(localStorage['colors']){
        $('#colorScheme').val(localStorage['colors']);
      }
      if(localStorage["modalTiming"]){
        MODAL_FADE_INTERVAL = parseInt(localStorage["modalTiming"]);
      } else {
        MODAL_FADE_INTERVAL = 1000;
      }
      if(localStorage["betFormTiming"]){
        BET_FORM_FADE_OUT = parseInt(localStorage["betFormTiming"]);
      } else {
        BET_FORM_FADE_OUT = 1000;
      }
      if(localStorage["diceTiming"]){
        DICE_ROLL = parseInt(localStorage["diceTiming"]);
      } else {
        DICE_ROLL = 1000;
      }
      if(localStorage['colors5']){
        colors5 = JSON.parse(localStorage['colors5']);
      }
      $('#modalTiming').val(MODAL_FADE_INTERVAL);
      $('#betFormTiming').val(BET_FORM_FADE_OUT);
      $('#diceTiming').val(DICE_ROLL);
      $('#startingBank').val(initBank);
      if(window.location.hash != ""){
        var crapsInfo = parseHash(window.location.hash);
        window.location.hash = "";
        makeCrapsPlayer(crapsInfo[0].slice(3), crapsInfo[1]);
      } else {
        if(localStorage["name"]){
          name = localStorage["name"];
        } else {
          name = "Set your name!";
        }
        if(localStorage["bank"]){
          bank = parseInt(localStorage["bank"]);
        } else {
          bank = initBank;
        }
      }
      makeCrapsPlayer(name, bank);
      if(localStorage['bet0']){
        var betNum = 0;
        while(localStorage['bet' + betNum]){
          var bet = JSON.parse(localStorage['bet' + betNum]);
          _CRAPS.dealer.betManager.bets.push(bet);
          betNum++;
        }
        nextBetId = _CRAPS.dealer.betManager.bets[_CRAPS.dealer.betManager.bets.length - 1].bet.betId + 1;
      }
      
      //_CRAPS.players = [p];
      
      function updateColors(){
        if($('#colorScheme').val() == 5){
          $('#customColors input').blur();
          $('#boardColor').attr('value', (colors5.board.slice(1,1) == "#")?colors5.board.slice(1):colors5.board);
          $('#border').attr('value', (colors5.border.slice(1,1) == "#")?colors5.border.slice(1):colors5.border);
          $('#pointOff').attr('value', (colors5.pointOff.slice(1,1) == "#")?colors5.pointOff.slice(1):colors5.pointOff);
          $('#pointBorder').attr('value', (colors5.pointBorder.slice(1,1) == "#")?colors5.pointBorder.slice(1):colors5.pointBorder);
          $('#pointOn').attr('value', (colors5.pointOn.slice(1,1) == "#")?colors5.pointOn.slice(1):colors5.pointOn);
          $('#lines').attr('value', (colors5.lines.slice(1,1) == "#")?colors5.lines.slice(1):colors5.lines);
          $('#text').attr('value', (colors5.text.slice(1,1) == "#")?colors5.text.slice(1):colors5.text);
          $('#buttonText').attr('value', (colors5.buttonText.slice(1,1) == "#")?colors5.buttonText.slice(1):colors5.buttonText);
          $('#specialText').attr('value', (colors5.specialText.slice(1,1) == "#")?colors5.specialText.slice(1):colors5.specialText);
          $('#finalText').attr('value', (colors5.finalText.slice(1,1) == "#")?colors5.finalText.slice(1):colors5.finalText);
          $('#dice').attr('value', (colors5.dice.slice(1,1) == "#")?colors5.dice.slice(1):colors5.dice);
          $('#dicePips').attr('value', (colors5.dicePips.slice(1,1) == "#")?colors5.dicePips.slice(1):colors5.dicePips);
          $('#betBorder').attr('value', (colors5.betBorder.slice(1,1) == "#")?colors5.betBorder.slice(1):colors5.betBorder);
          $('#betFill').attr('value', (colors5.betFill.slice(1,1) == "#")?colors5.betFill.slice(1):colors5.betFill);
          $('#customColors').show();
        } else {
          $('#customColors').hide();
        }
        //resizeModal();
        colors = eval("colors" + $('#colorScheme').val());
        draw(Board);
      }
      
      function resetColors(){
        $.extend(colors5, colors0);
        $('#betBorder').attr('value', colors5.betBorder);
        $('#boardColor').attr('value', colors5.board);
        $('#border').attr('value', colors5.border);
        $('#pointOff').attr('value', colors5.pointOff);
        $('#pointBorder').attr('value', colors5.pointBorder);
        $('#pointOn').attr('value', colors5.pointOn);
        $('#lines').attr('value', colors5.lines);
        $('#text').attr('value', colors5.text);
        $('#buttonText').attr('value', colors5.buttonText);
        $('#specialText').attr('value', colors5.specialText);
        $('#finalText').attr('value', colors5.finalText);
        $('#dice').attr('value', colors5.dice);
        $('#dicePips').attr('value', colors5.dicePips);
        $('#betFill').attr('value', colors5.betFill);
      }
      
      function saveSettings(){
        if(!isNaN(parseInt($('#startingBank').val()))){
          initBank = parseInt($('#startingBank').val());
          MODAL_FADE_INTERVAL = parseInt($('#modalTiming').val());
          BET_FORM_FADE_OUT = parseInt($('#betFormTiming').val());
          DICE_ROLL = parseInt($('#diceTiming').val());
          colors5.betBorder = $('#betBorder').attr('value');
          colors5.board = $('#boardColor').attr('value');
          colors5.border = $('#border').attr('value');
          colors5.pointOff = $('#pointOff').attr('value');
          colors5.pointBorder = $('#pointBorder').attr('value');
          colors5.pointOn = $('#pointOn').attr('value');
          colors5.lines = $('#lines').attr('value');
          colors5.text = $('#text').attr('value');
          colors5.buttonText = $('#buttonText').attr('value');
          colors5.specialText = $('#specialText').attr('value');
          colors5.finalText = $('#finalText').attr('value');
          colors5.dice = $('#dice').attr('value');
          colors5.dicePips = $('#dicePips').attr('value');
          colors5.betFill = $('#betFill').attr('value');
          PlayerManager.updatePlayerArea();
        } else {
          alert('Please enter a number as the initial bank!');
        }
      }
      
      function saveGameState(){
        //prompt("Copy URL to take game to another device!", "http://duleone.com/craps/#!/" + encodeURIComponent(PlayerManager.players[0].player.name) + '/' + (PlayerManager.players[0].player.bank).toString(36));
        prompt("Copy URL to take game to another device!\nAll bets on the table and Fire Bet progress will be lost!", window.location.origin + window.location.pathname + encodeURIComponent(PlayerManager.players[0].player.name) + '/' + (PlayerManager.players[0].player.bank).toString(36));
        //window.location.hash = '!/' + encodeURIComponent(PlayerManager.players[0].player.name) + '/' + (PlayerManager.players[0].player.bank).toString(36);
      }
      
      function parseHash(str){
        var retArray = [];
        var name = decodeURIComponent(str.slice(0, str.lastIndexOf('/')));
        retArray.push(name);
        retArray.push(parseInt(str.slice(str.lastIndexOf('/') + 1), 36));
        return retArray;
      }

      var p = PlayerManager.players[0];
      PlayerManager.updatePlayerArea();
      
      var BET_FADE_INTERVAL = 2000;

      function roll(){
        if(roller != null){
          return;
        }
        _CRAPS.roll();
        localStorage['point'] = GameState.point;
        localStorage['fireArray'] = JSON.stringify(GameState.fireArray);
        //draw(Board);
        //$('#pointWindow').html('Point: ' + ((GameState.point>0)?GameState.point:'None'));
        var animateTimeout = setInterval(
          function(){
            _CRAPS.dealer.betManager.displayBets();
            clearInterval(animateTimeout);
          }, (BET_FADE_INTERVAL + DICE_ROLL));
      }
      
      function reset(){
        var _bets = _CRAPS.dealer.betManager.bets
        if(GameState.tutorial && GameState.tutorialState > -1){
            alert("You cannot take down a Tutorial bet.");
            return;
        }
        for(x in _bets){
          if(GameState.tutorial){
            _CRAPS.dealer.betManager.removeBet(_bets[x].bet.betId);
            continue;
          }else if(_bets[x].type == 'passline'){
            if(GameState.point > 0){
              continue;
            }else{
              _CRAPS.dealer.betManager.removeBet(_bets[x].bet.betId);
            }
          }else if(_bets[x].type == 'come'){
            if(_bets[x].point > 0){
              continue;
            }else{
              _CRAPS.dealer.betManager.removeBet(_bets[x].bet.betId);
            }
          }
          _CRAPS.dealer.betManager.removeBet(_bets[x].bet.betId);
        }
      }
      
      function place(){
        $('#betInfo').width($('#board').width() * (1/4));
        $('#betForm').show();
        $('#betForm').height($('#betInfo').height() + 8 + 4);
        $('#betForm').width($('#betInfo').width() + 8 + 4);
        //$('#betForm').animate({left: ($('#board').offset().left + $('#board').width() - $('#betForm').width() - (parseInt($('#betForm').css('padding')) * 2 + parseInt($('#betForm').css('margin')) * 2)), opacity: 1}, 1000);
        $('#betForm').animate({left: ($('#board').offset().left + $('#board').width() - $('#betForm').width() - (4 * 2 + 2 * 2)), opacity: 1}, BET_FORM_FADE_OUT);
      }
      
      function openModal(){
        if(!GameState.tutorial){
          $('#modalScreen').show();
        }
        var mod = $('#modal');
        mod.show();
        mod.animate({opacity: 1}, MODAL_FADE_INTERVAL);
        //resizeModal();
        if($('#colorScheme').val() == 5){
          $('#customColors').show();
          $('#customColors input').blur();
        } else {
          $('#customColors').hide();
        }
        $('#openButtons').hide();
        PlayerManager.updatePlayerArea();
      }
      
      function closeModal(){
        $('#boardColor').attr('value',  colors5.board      );
        $('#border').attr('value',      colors5.border     );
        $('#pointOff').attr('value',    colors5.pointOff   );
        $('#pointBorder').attr('value', colors5.pointBorder);
        $('#pointOn').attr('value',     colors5.pointOn    );
        $('#lines').attr('value',       colors5.lines      );
        $('#text').attr('value',        colors5.text       );
        $('#buttonText').attr('value',  colors5.buttonText );
        $('#specialText').attr('value', colors5.specialText);
        $('#finalText').attr('value',   colors5.finalText  );
        $('#dice').attr('value',        colors5.dice       );
        $('#dicePips').attr('value',    colors5.dicePips   );
        $('#betBorder').attr('value',   colors5.betBorder  );
        $('#betFill').attr('value',     colors5.betFill    );
        saveSettings();
        $('#colorScheme').val(localStorage['colors']);
        colors = eval("colors" + localStorage['colors']);
        $('#modal').animate({opacity: 0}, MODAL_FADE_INTERVAL, function(){$('#modalScreen').hide();$('#modal').hide();});
        $('#openButtons').show();
        PlayerManager.updatePlayerArea();
      }
      
      function openGlossary(term){
        switch(term){
        case "button":
          $('#glossaryTerm').html('Button:');
          $('#glossaryDefinition').html('A circle disk on the table that either says "OFF" when there is no Point on, or says "ON" resting on top of a number in the Place Bets area, indicating that is the current Point.');
          break;
        case "point":
          $('#glossaryTerm').html('Point:');
          $('#glossaryDefinition').html('What ever number is "ON".');
          break;
        case "comeOut":
          $('#glossaryTerm').html('Come Out Roll:');
          $('#glossaryDefinition').html('A roll when there is no Point set.');
          break;
        case "345":
          $('#glossaryTerm').html('3x-4x-5x Odds:');
          $('#glossaryDefinition').html('Scheme to determine the multiplier on Odds bets, based on the Point.<br /> Points 4 &amp; 10 may bet at most 3 times the attached bet<br /> Points 5 &amp; 9 may bet at most 4 times the attached bet<br /> Points 6 &amp; 8 may bet at most 5 times the attached bet');
          break;
        case "sevenOut":
          $('#glossaryTerm').html('Seven Out:');
          $('#glossaryDefinition').html('Roll a 7 when there is a Point on, ends the roll');
          break;
        }
        $('#glossary').show();
        $('#glossaryScreen').show();
      }
      
      function closeGlossary(){
        $('#glossaryScreen').hide();
        $('#glossary').hide();
      }
      
      function clickModalButton(button){
        var modals = ['help', 'rules', 'settings', 'tutorial'];
        var mod = $('#modal');
        if(mod.css('visibility')== 'hidden' || mod.css('display') == 'none'){
          openModal();
        }
        modals.splice(modals.indexOf(button), 1);
        for(i in modals){
          $('#' + modals[i] + 'Button').removeClass('blue');
          $('#' + modals[i]).hide();
        }
        $('#' + button + 'Button').addClass('blue');
        $('#' + button).show();
        //resizeModal();
        if($('#colorScheme').val() == 5){
          $('#customColors').show();
          $('#customColors input').blur();
        } else {
          $('#customColors').hide();
        }
        if(button == 'tutorial'){
          updateTutorial();
        }
      }
      
      function clickRulesButton(button){
        var modals = ['standard', 'multi', 'single', 'fire'];
        var mod = $('#modal');
        modals.splice(modals.indexOf(button), 1);
        for(i in modals){
          $('#' + modals[i] + 'Button').removeClass('red');
          $('#' + modals[i]).hide();
        }
        $('#' + button + 'Button').addClass('red');
        $('#' + button).show();
        //resizeModal();
        if($('#colorScheme').val() == 5){
          $('#customColors').show();
          $('#customColors input').blur();
        } else {
          $('#customColors').hide();
        }
      }
      
      function resizeModal(){
        $('#help').height('auto');
        $('#rules').height('auto');
        $('#standard').height('auto');
        $('#multi').height('auto');
        $('#single').height('auto');
        $('#fire').height('auto');
        $('#settings').height('auto');
        $('#modal').height('auto');
        if($('#modal').height() > $(window).height() * 0.8){
          $('#modal').height($(window).height() * 0.7);
          $('#help').height($('#modal').height() * 0.7);
          $('#rules').height($('#modal').height() * 0.7);
          $('#rules').height($('#modal').height() * 0.7);
          $('#standard').height($('#rules').height() * 0.7);
          $('#multi').height($('#rules').height() * 0.7);
          $('#single').height($('#rules').height() * 0.7);
          $('#fire').height($('#rules').height() * 0.7);
          $('#settings').height($('#modal').height() * 0.7);
        } else {
          $('#help').height('auto');
          $('#rules').height('auto');
          $('#standard').height('auto');
          $('#multi').height('auto');
          $('#single').height('auto');
          $('#fire').height('auto');
          $('#settings').height('auto');
          $('#modal').height('auto');
        }
        $('#help').width('auto');
        $('#rules').width('auto');
        $('#standard').width('auto');
        $('#multi').width('auto');
        $('#single').width('auto');
        $('#fire').width('auto');
        $('#settings').width('auto');
        $('#modal').width('auto');
        if($('#modal').width() > $(window).width() * 0.8){
          $('#modal').width($(window).width() * 0.7);
          $('#help').width('auto');
          $('#rules').width('auto');
          $('#standard').width('auto');
          $('#multi').width('auto');
          $('#single').width('auto');
          $('#fire').width('auto');
          $('#settings').width('auto');
        } else {
          $('#help').width('auto');
          $('#rules').width('auto');
          $('#standard').width('auto');
          $('#multi').width('auto');
          $('#single').width('auto');
          $('#fire').width('auto');
          $('#settings').width('auto');
          $('#modal').width('auto');
        }
        $('#modal').css('left', (($(window).width() - $('#modal').width())/2));
        $('#modal').css('top', (($(window).height() - $('#modal').height())/2));
      }
      
      function create(){
        //console.log($('#betType').val());
        //console.log($('#betValue').val());
        //console.log($('#betRepeat').is(':checked'));
        //console.log(parseInt($('#betValue').val()));
        var origBet = null;
        if(['passlineOdds', 'comeOdds', 'dontPassOdds', 'dontComeOdds'].indexOf($('#betType').val()) != -1){
          origBet = _CRAPS.dealer.betManager.getBetById($('#orig').val());
          if(!_CRAPS.dealer.betManager.getBetById($('#orig').val())){
            alert('You may not place a Pass Line Odds Bet when there is no Pass Line Bet on the table.');
            cancel();
          }
        }
        var newBet = p.createBet($('#betType').val(), parseInt($('#betValue').val()), $('#betRepeat').is(':checked'), origBet);
        //console.log('Placing bet:', newBet.toString());
        _CRAPS.placeBet(newBet);
        PlayerManager.updatePlayerArea();
        $('#betForm').animate({left: ($('#board').offset().left + $('#board').width() + 2), opacity: 0}, BET_FORM_FADE_OUT, function(){$('#betForm').hide();});
        if(GameState.tutorial){
          updateTutorial();
        }
      }
      
      function cancel(){
        $('#betForm').animate({left: ($('#board').offset().left + $('#board').width() + 2), opacity: 0}, BET_FORM_FADE_OUT, function(){$('#betForm').hide();});
      }
      
      function updatePlayerName(){
        var player = PlayerManager.players[0];
        var nameDiv = $('#name');
        nameDiv.empty();
        var input = $(document.createElement('input'));
        input.attr('type', 'text');
        input.attr('id', 'nameInput');
        input.css({width: '50%'});
        nameDiv.css({top: '05px'});
        nameDiv.removeClass('clickable');
        $('#bank').css({top: 0});
        $('#buffer').css({top: ($('#bank').offset().top + $('#bank').height())});
        $('#buffer').height(($('#board').height() - $('#playerArea').height())/2);
        $('#betListing').height($('#board').height() - $('#playerArea').height() - $('#buffer').height() + $(board).height()*(3/7));
        input.attr('value', player.player.name);
        nameDiv.css('left', 0);
        if(input.attr('value') == 'Set your name!'){
          input.attr('value', 'Your Name');
        }
        input.focus(function(){
          input.select();
          $('#bank').height(Math.max($('#availBank').offset().top, $('#inPlay').offset().top, $('#totBank').offset().top) + Math.max($('#availBank').height(), $('#inPlay').height(), $('#totBank').height()));
          $('#playerArea').height($('#bank').height() + 4);
          $('#buffer').css('top', $('#playerArea').height());
          $('#buffer').height(($('#board').height() - $('#playerArea').height())/2);
          $('#betListing').css('top', ($('#buffer').offset().top + $('#buffer').height() + 2));
          $('#betListing').height($('#board').height() - $('#playerArea').height() - $('#buffer').height() + $(board).height()*(3/7));
        });
        input.change(function(){
          player.changeName(input.val());
          PlayerManager.updatePlayerArea();
          $('#name').attr('class', 'clickable');
          $('#buffer').height(($('#board').height() - $('#playerArea').height())/2);
          $('#betListing').css('top', ($('#buffer').offset().top + $('#buffer').height() + 2));
          $('#betListing').height($('#board').height() - $('#playerArea').height() - $('#buffer').height() + $(board).height()*(3/7));
        });
        input.blur(function(){
          player.changeName(input.val());
          PlayerManager.updatePlayerArea();
          $('#name').attr('class', 'clickable');
          $('#buffer').height(($('#board').height() - $('#playerArea').height())/2);
          $('#betListing').css('top', ($('#buffer').offset().top + $('#buffer').height() + 2));
          $('#betListing').height($('#board').height() - $('#playerArea').height() - $('#buffer').height() + $(board).height()*(3/7));
        });
        nameDiv.append(input);
        input.focus();
      }
      
      function updateTutorial(){
        var _bets = _CRAPS.dealer.betManager.bets;
        if(!GameState.tutorial){
          $('#tutorialDescription').html("This tutorial will teach you how to place a Pass Line bet, as well as a Pass Line Odds bet and walk you through a Pass Line bet sequence.<br /><br />The Pass Line bet is the traditional/standard bet in Craps, and the one that most people think of when they think of Craps.<br /><br />While you are completing the tutorial, this window will describe what is happening, but you can close this window with the 'Close' button below to see your bets. To open this window again, click the 'Tutorial' button.<br /><br />Starting the tutorial will remove all your bets and reset the game.<br /><br />To start the tutorial, click 'Start Tutorial'.");
          $('#tutorialInstruction').html('');
        }else if(GameState.tutorialState == 0 && _bets.length == 0){
          $('#tutorialDescription').html('To start, notice that the <span class="keyword" onclick="openGlossary(\'button\')" title="Point Indicator">button</span> says "Off". This means the <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> is off. You can only place a Pass Line bet when the <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> is off. You may now place a Pass Line bet.<br /><br />Click on the Pass Line, and create a Pass Line bet by clicking "Create Bet". $100 is a good amount to bet.');
          $('#tutorialInstruction').html('Click the Pass Line');
        }else if(GameState.tutorialState == 0 && _bets.length == 1){
          $('#tutorialDescription').html('You\'ve now created a Pass Line bet! Roll the dice, and let\'s see what happens on your <span class="keyword" onclick="openGlossary(\'comeOut\')" title="A roll when there is no Point set">come out roll</span>!');
          $('#tutorialInstruction').html('Click Roll');
        }else if(GameState.tutorialState == 1){
          $('#tutorialDescription').html('You rolled a 7! You win on the Pass Line <span class="keyword" onclick="openGlossary(\'comeOut\')" title="A roll when there is no Point set">come out roll</span>!<br /><br />You have another <span class="keyword" onclick="openGlossary(\'comeOut\')" title="A roll when there is no Point set">come out roll</span>, roll again!');
          $('#tutorialInstruction').html('Click Roll');
        }else if(GameState.tutorialState == 2){
          $('#tutorialDescription').html('You rolled a 3! You lose on the Pass Line <span class="keyword" onclick="openGlossary(\'comeOut\')" title="A roll when there is no Point set">come out roll</span>, but your roll isn\'t over! When you lose the Pass Line bet on a <span class="keyword" onclick="openGlossary(\'comeOut\')" title="A roll when there is no Point set">come out roll</span>, it is automatically rebet.<br /><br />You have another <span class="keyword" onclick="openGlossary(\'comeOut\')" title="A roll when there is no Point set">come out roll</span>, roll again!');
          $('#tutorialInstruction').html('Click Roll');
        }else if(GameState.tutorialState == 3 && _bets.length == 1){
          $('#tutorialDescription').html('You rolled an 8! A <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> is now set. Because a <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> is set and you have a Pass Line bet on the table, you can now create a Pass Line Odds bet! You want to create a Pass Line Odds bet because the Pass Line bet only pays out 1 to 1, but Pass Line Odds bets pay out at better odds.<br /><br />Click the Pass Line to create a Pass Line Odds bet!<br /><br />This is a <span class="keyword" onclick="openGlossary(\'345\')" title="Determines the multiplier on Odds bets, based on the Point">3x-4x-5x Odds</span> table, so for a <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> of 8, you can bet a maximum of 5 times your Pass Line bet. Create a Pass Line Odds bet for $' + (_CRAPS.dealer.betManager.bets[0].bet.value * 5) + '. Create a Pass Line Odds bet by using the slider and clicking "Create Bet".');
          $('#tutorialInstruction').html('Click the Pass Line');
        }else if(GameState.tutorialState == 3 && _bets.length == 2){
          $('#tutorialDescription').html('You\'ve now created a Pass Line Odds bet! It\'s time to roll the dice again! You will roll until you roll the <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> (an 8) or a 7.');
          $('#tutorialInstruction').html('Click Roll');
        }else if(GameState.tutorialState == 4){
          $('#tutorialDescription').html('You rolled an 8! You won your Pass Line and Pass Line Odds bets by rolling the <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span>!<br /><br />The <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> is off, and you are on a <span class="keyword" onclick="openGlossary(\'comeOut\')" title="A roll when there is no Point set">come out roll</span> again! Roll the dice!');
          $('#tutorialInstruction').html('Click Roll');
        }else if(GameState.tutorialState == 5){
          $('#tutorialDescription').html('You rolled a 5! A <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> is now set. Because this is a tutorial, let\'s not bet Pass Line Odds, since you already know how to do that!<br /><br />Roll the dice! You will roll until you roll the <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> or a 7.');
          $('#tutorialInstruction').html('Click Roll');
        }else if(GameState.tutorialState == 6){
          $('#tutorialDescription').html('You rolled a 9! Since it is neither the <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> nor a 7, you get to keep rolling!<br /><br />Roll the dice! You will roll until you roll the <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> or a 7.');
          $('#tutorialInstruction').html('Click Roll');
        }else if(GameState.tutorialState == 7){
          $('#tutorialDescription').html('<span class="keyword" onclick="openGlossary(\'sevenOut\')" title="Roll a 7 when there is a Point on, ends the roll">Seven Out</span>! You rolled a 7 with a <span class="keyword" onclick="openGlossary(\'point\')" title="Roll Objective">Point</span> on, so you lose your Pass Line bet, and would have lost a Pass Line Odds bet if you had one.<br /><br />That\'s how Pass Line and Pass Line Odds bets work!<br /><br />This tutorial is over. Click "Close Tutorial" to return to the normal game. You will not be able to play until you close the tutorial.');
          $('#tutorialInstruction').html('Seven Out! Click "Close Tutorial".');
        }
      }
      
      function startTutorial(){
        $('#closeTutorial').show();
        $('#closeTutorial2').show();
        $('#tutorialInstruction').show();
        $('#startTutorial').hide();
        $('#modalScreen').hide();
        GameState.tutorial = true;
        GameState.tutorialState = -1;
        
        //reset Bets
        reset();
        GameState.tutorialState = 0;
        
        //reset Game
        nextBetId = 1;
        GameState.point = null;
        for(i in GameState.fireArray){
          GameState.fireArray[i] = false;
        }
        PlayerManager.updatePlayerArea();
        
        updateTutorial();
      }
      
      function closeTutorial(){
        GameState.tutorial = false;
        if($('#modal').css('display') != 'none'){
          $('#modalScreen').show();
        }
        $('#startTutorial').show();
        $('#closeTutorial').hide();
        $('#closeTutorial2').hide();
        $('#tutorialInstruction').hide();
        updateTutorial();
        
      }
      
      function updateBet(idNum){
        var _betDisp = $('#bet' + idNum);
        var _betDispVal = $('#val' + idNum);
        var _bet = _CRAPS.dealer.betManager.getBetById(idNum);
        
        var oldVal = _betDispVal.html().slice(1);
        //console.log(oldVal);
        
        _betDispVal.empty();
        _betDispVal.removeClass('bttn');
        var input = $(document.createElement('input'));
        input.attr('type', 'text');
        //input.attr('id', 'nameInput');
        input.css({width: $('#val' + idNum).width()});
        input.attr('value', oldVal);
        input.focus(function(){
          input.select();
        });
        input.change(function(){
          var _betDispVal = $('#val' + idNum);
          var _bet = _CRAPS.dealer.betManager.getBetById(idNum);
          var oldVal = _bet.bet.value;
          var newAmount = input.val();
          var retArray = revalidate(_bet, newAmount)
          if(!retArray[0]){
            retArray[1]();
            return;
          }
          if(retArray[0] == 3){
            _betDispVal.empty();
            _betDispVal.html('$' + oldVal);
            retArray[1]();
            return;
          } else {
            _betDispVal.empty();
            _betDispVal.html('$' + newAmount);
          _betDispVal.attr('class', 'clickable');
            _bet.bet.value = parseInt(newAmount);
            var diff = (parseInt(newAmount) - parseInt(oldVal))
            PlayerManager.getPlayerById(_bet.bet.playerId).player.subFromBank(diff);
          }
          PlayerManager.updatePlayerArea();
          if(retArray[0] == 2){
            retArray[1]();
          }
        });
        input.blur(function(){
          var _betDispVal = $('#val' + idNum);
          var _bet = _CRAPS.dealer.betManager.getBetById(idNum);
          var oldVal = _bet.bet.value;
          var newAmount = input.val();
          var retArray = revalidate(_bet, newAmount)
          if(!retArray[0]){
            retArray[1]();
            return;
          }
          _betDispVal.empty();
          _betDispVal.html('$' + newAmount);
          _betDispVal.attr('class', 'clickable');
          _bet.bet.value = parseInt(newAmount);
          var diff = (parseInt(newAmount) - parseInt(oldVal))
          _bet.bet.player.player.subFromBank(diff);
          PlayerManager.updatePlayerArea();
          if(retArray[0] == 2){
            retArray[1]();
          }
        });
        _betDispVal.append(input);
        input.focus();
      }
      
      (function() {
        $('#betValue').attr('value', '100');
        $('#betValue').css({width: '50px'});
        $('#betForm').css({left: ($('#board').offset().left + $('#board').width() + 2)});
        $('#bank').height(Math.max($('#availBank').offset().top, $('#inPlay').offset().top, $('#totBank').offset().top) + Math.max($('#availBank').height(), $('#inPlay').height(), $('#totBank').height()));
        $('#playerArea').height($('#bank').height() + 4);
        $('#buffer').css('top', $('#playerArea').height());
        $('#buffer').height(($('#board').height() - $('#playerArea').height())/2);
        //$('#betListing').height($('#board').height() - $('#playerArea').height() - $('#buffer').height());
        $('#betListing').css('top', ($('#buffer').offset().top + $('#buffer').height() + 2));
        _CRAPS.dealer.betManager.displayBets();
        $('#betType').change(function(){
          $('#origBet').empty();
          $('#betRepeat').attr('disabled', 'false');
          $('#betRepeat').attr('checked', 'true');
          $('#betValSlide').attr('max', Math.min(_CRAPS.maxBet, PlayerManager.players[0].player.bank));
          $('#betValSlide').attr('value', $('#betValSide').val());
          var type = $('#betType').val();
          if(['passlineOdds', 'comeOdds', 'dontPassOdds', 'dontComeOdds'].indexOf(type) != -1){
            var origBet = $('#origBet');
            var origLabel = $(document.createElement('label'));
            var orig = $(document.createElement('input'));
            var bets = _CRAPS.dealer.betManager.bets;
            orig.attr('type', 'text');
            orig.css({width: '50px'});
            orig.attr('id', 'orig');
            if(type == 'passlineOdds' || type == 'dontPassOdds'){
              var _type = type.slice(0, 8);
              for(i in bets){
                if(bets[i].type == _type){
                  orig.attr('value', bets[i].bet.betId);
                }
              }
            }
            if(type == 'comeOdds' || type == 'dontComeOdds'){
              var _type = type.slice(0, -4);
              var valid = [];
              var odds = [];
              var oddsPoints = [];
              for(i in bets){
                if(bets[i].type == _type){
                  valid.push(bets[i]);
                }
                if(bets[i].type == type){
                  odds.push(bets[i]);
                  oddsPoints.push(bets[i].origBet.point);
                }
              }
              
              for(i in valid){
                if(oddsPoints.indexOf(valid[i].point) == -1 && valid[i].point > 0){
                  orig.attr('value', valid[i].bet.betId);
                  break;
                }
              }
            }
            origLabel.html('Original Bet ID: ');
            origBet.append(origLabel).append(orig);
            var origVal;
            for(i in _CRAPS.dealer.betManager.bets){
              if(_CRAPS.dealer.betManager.bets[i].type == 'passline'){
                origVal = _CRAPS.dealer.betManager.bets[i].bet.value;
              }
            }
            if(type == 'passlineOdds'){
              if(GameState.point == 4 || GameState.point == 10){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 3);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(GameState.point == 5 || GameState.point == 9){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 4);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(GameState.point == 6 || GameState.point == 8){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 5);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              }
            } else if(type == 'dontPassOdds'){
              if(GameState.point == 4 || GameState.point == 10){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 6);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(GameState.point == 5 || GameState.point == 9){
                $('#betValSlide').attr('step', '30');
                $('#betValSlide').attr('max', origVal * 8);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(GameState.point == 6 || GameState.point == 8){
                $('#betValSlide').attr('step', '60');
                $('#betValSlide').attr('max', origVal * 10);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              }
            } else if(type == 'comeOdds'){
              origVal = _CRAPS.dealer.betManager.getBetById(orig.val()).bet.value;
              if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 4 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 10){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 3);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 5 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 9){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 4);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 6 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 8){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 5);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              }
              orig.change(function(){
                if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 4 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 10){
                  $('#betValSlide').attr('step', '50');
                  $('#betValSlide').attr('max', origVal * 3);
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 5 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 9){
                  $('#betValSlide').attr('step', '50');
                  $('#betValSlide').attr('max', origVal * 4);
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 6 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 8){
                  $('#betValSlide').attr('step', '50');
                  $('#betValSlide').attr('max', origVal * 5);
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                }
                updateSlider(0);
                updateSlider(parseInt($('#betValue').attr('value')));
              });
            } else if(type == 'dontComeOdds'){
              origVal = _CRAPS.dealer.betManager.getBetById(orig.val()).bet.value;
              if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 4 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 10){
                $('#betValSlide').attr('step', '50');
                $('#betValSlide').attr('max', origVal * 6);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 5 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 9){
                $('#betValSlide').attr('step', '30');
                $('#betValSlide').attr('max', origVal * 8);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 6 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 8){
                $('#betValSlide').attr('step', '60');
                $('#betValSlide').attr('max', origVal * 10);
                $('#betValSlide').attr('value', $('#betValue').attr('value'));
              }
              orig.change(function(){
              if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 4 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 10){
                  $('#betValSlide').attr('step', '50');
                  $('#betValSlide').attr('max', origVal * 6);
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 5 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 9){
                  $('#betValSlide').attr('step', '30');
                  $('#betValSlide').attr('max', origVal * 8);
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                } else if(_CRAPS.dealer.betManager.getBetById(orig.val()).point == 6 || _CRAPS.dealer.betManager.getBetById(orig.val()).point == 8){
                  $('#betValSlide').attr('step', '60');
                  $('#betValSlide').attr('max', origVal * 10);
                  $('#betValSlide').attr('value', $('#betValue').attr('value'));
                }
                updateSlider(0);
                updateSlider(parseInt($('#betValue').attr('value')));
              });
            }
            $('#betRepeat').removeAttr('checked');
            $('#betRepeat').attr('disabled', 'true');
            $('#betForm').height($('#betInfo').height() + 8 + 4);
          }
          updateBetDesc();
          updateSlider(0);
          updateSlider(parseInt($('#betValue').attr('value')));
          var _height = $('#betInfo').height() + 8 + 3;
          $('#betForm').css({height: _height});
        });
      })();
      
      $(window).resize(function(){PlayerManager.updatePlayerArea();});
      
      function prettyToName(betType){
        switch(betType){
        case "Pass Line":
          return 'passline';
          break;
        case "Pass Line Odds":
          return 'passlineOdds';
          break;
        case "Don't Pass":
          return 'dontPass';
          break;
        case "Don't Pass Odds":
          return 'dontPassOdds';
          break;
        case "Come":
          return 'come';
          break;
        case "Come Odds":
          return 'comeOdds';
          break;
        case "Don't Come":
          return 'dontCome';
          break;
        case "Don't Come Odds":
          return 'dontComeOdds';
          break;
        case "Place 4":
          return 'place4';
          break;
        case "Place 5":
          return 'place5';
          break;
        case "Place 6":
          return 'place6';
          break;
        case "Place 8":
          return 'place8';
          break;
        case "Place 9":
          return 'place9';
          break;
        case "Place 10":
          return 'place10';
          break;
        case "Big 6":
          return 'big6';
          break;
        case "Big 8":
          return 'big8';
          break;
        case "Field":
          return 'field';
          break;
        case "C and E":
          return 'cAndE';
          break;
        case "Seven":
          return 'any7';
          break;
        case "Hard 4":
          return 'hard4';
          break;
        case "Hard 6":
          return 'hard6';
          break;
        case "Hard 8":
          return 'hard8';
          break;
        case "Hard 10":
          return 'hard10';
          break;
        case "Ace Two":
          return 'aceTwo';
          break;
        case "Snake Eyes":
          return 'snakeEyes';
          break;
        case "Midnight":
          return 'midnight';
          break;
        case "Yo-leven":
          return 'yoleven';
          break;
        case "Craps":
          return 'anyCraps';
          break;
        case "Horn":
          return 'horn';
          break;
        case "World":
          return 'world';
          break;
        case "Fire":
          return 'fire';
          break;
        default:
          return;
        }
      }
      
      function nameToPretty(betType){
        switch(betType){
        case 'passline':
          return "Pass Line";
          break;
        case 'passlineOdds':
          return "Pass Line Odds";
          break;
        case 'dontPass':
          return "Don't Pass";
          break;
        case 'dontPassOdds':
          return "Don't Pass Odds";
          break;
        case 'come':
          return "Come";
          break;
        case 'comeOdds':
          return "Come Odds";
          break;
        case 'dontCome':
          return "Don't Come";
          break;
        case 'dontComeOdds':
          return "Don't Come Odds";
          break;
        case 'place4':
          return "Place 4";
          break;
        case 'place5':
          return "Place 5";
          break;
        case 'place6':
          return "Place 6";
          break;
        case 'place8':
          return "Place 8";
          break;
        case 'place9':
          return "Place 9";
          break;
        case 'place10':
          return "Place 10";
          break;
        case 'big6':
          return "Big 6";
          break;
        case 'big8':
          return "Big 8";
          break;
        case 'field':
          return "Field";
          break;
        case 'cAndE':
          return "C and E";
          break;
        case 'any7':
          return "Seven";
          break;
        case 'hard4':
          return "Hard 4";
          break;
        case 'hard6':
          return "Hard 6";
          break;
        case 'hard8':
          return "Hard 8";
          break;
        case 'hard10':
          return "Hard 10";
          break;
        case 'aceTwo':
          return "Ace Two";
          break;
        case 'snakeEyes':
          return "Snake Eyes";
          break;
        case 'midnight':
          return "Midnight";
          break;
        case 'yoleven':
          return "Yo-leven";
          break;
        case 'anyCraps':
          return "Craps";
          break;
        case 'horn':
          return "Horn";
          break;
        case 'world':
          return "World"
          break;
        case 'fire':
          return "Fire";
          break;
        default:
          return;
        }
      }

    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-1424934-14', 'duleone.com');
      ga('send', 'pageview');
    
    </script>
    </footer>
</html>
